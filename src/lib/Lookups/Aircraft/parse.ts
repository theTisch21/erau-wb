//This file is simply to parse the CSV data from ETA and excel to convert it to a format we can use

import type { Aircraft } from './aircraft'

export async function parse() {
	//A CSV in this format: Name, N#, Empty weight, Moment, Arm, Useful Load, Max Gross Weight
	const input = `E1,N31ER,1225,39258,32.0473,535,1760
E2,N42ER,1200.04,37501.25,31.25,559.96,1760
E3,N4349U,1126,37195.16,33.033,474,1600
R- 1,N912MA,1325.72,16460.72,12.4164,474.28,1800
R- 2,N602ER,1707.7,70137,41.071,850.3,2558
R- 3,N603ER,1712.4,69894,40.8164,845.6,2558
R- 4,N604ER,1707.7,70137,41.071,850.3,2558
R- 5,N605ER,1707.7,70137,41.071,850.3,2558
R- 6,N506ER,1714.7,70880,41.3367,843.3,2558
R- 7,N507ER,1714.7,70880,41.3367,843.3,2558
R- 8,N608ER,1707.7,70137,41.071,850.3,2558
R- 9,N509ER,1714.7,70880,41.3367,843.3,2558
R-10,N610ER,1707.7,70137,41.071,850.3,2558
R-11,N511ER,1714.7,70880,41.3367,843.3,2558
R-12,N712ER,1714.7,70880,41.3367,843.3,2558
R-14,N614ER,1707.7,70137,41.071,850.3,2558
R-15,N615ER,1707.7,70137,41.071,850.3,2558
R-16,N516ER,1714.7,70880,41.3367,843.3,2558
R-17,N617ER,1713.4,70525,41.1608,844.6,2558
R-18*,N718ER,1713.4,70854,41.3529,844.6,2558
R-19,N619ER,1714.8,71457,41.6707,843.2,2558
R-22,N522ER,1714.7,70880,41.3367,843.3,2558
R-23 W,N236TH,1689.8,69508,41.1339,868.2,2558
R-24*,N724ER,1713.4,70854,41.3529,844.6,2558
R-25 W,N235TH,1690.1,70084.9,41.4679,867.9,2558
R-26*,N726ER,1726.8,72142,41.7779,831.2,2558
R-28*,N728ER,1714.7,70880,41.3367,843.3,2558
R-29,N629ER,1711.4,70459,41.1704,846.6,2558
R-30*,N730ER,1714.7,70880,41.3367,843.3,2558
R-37*,N637ER,1683.96,67996.13,40.3787,874.04,2558
R-39*,N639ER,1684.73,68261.29,40.5176,873.27,2558
R-40 W,N640ER,1683.06,68613.95,40.7674,874.94,2558
R-41 W,N641ER,1683.06,68613.95,40.7674,874.94,2558
R-42 W,N542ER,1714.7,70880,41.3367,843.3,2558
R-43 W,N643ER,1683.06,68613.95,40.7674,874.94,2558
R-44 W,N644ER,1675.16,68156.59,40.6866,882.84,2558
R-45 W,N645ER,1678.26,68407.75,40.7611,879.74,2558
R-46 W,N646ER,1682.6,68576.47,40.7563,875.4,2558
R-47 W,N647ER,1680.2,68473.37,40.7531,877.8,2558
R-48,N648ER,1677.8,68370.27,40.75,880.2,2558
R-49 SPIN,N649ER,1652.7,66030.94,39.9534,905.3,2558
R-52 W,N652ER,1680.88,68400.37,40.6932,877.12,2558
R-53 W,N653ER,1723.7,71676,41.5826,834.3,2558
R-54*,N554ER,1714.7,70880,41.3367,843.3,2558
R-55,N655ER,1723.7,71676,41.5826,834.3,2558
R-56 W,N656ER,1723.7,71676,41.5826,834.3,2558
R-57 W,N657ER,1723.7,71676,41.5826,834.3,2558
R-58 W,N658ER,1706.4,70775,41.4762,851.6,2558
R-59 W,N659ER,1706.4,70775,41.4762,851.6,2558
R-60 W,N660ER,1706.4,70775,41.4762,851.6,2558
R-61 SPIN,N661ER,1679.5875,68416.12,40.7339,878.4125,2558
R-62 W,N662ER,1706.4,70775,41.4762,851.6,2558
R-64 W,N664ER,1708.4,70791,41.437,849.6,2558
R-65 W,N565ER,1714.7,70880,41.3367,843.3,2558
R-66 W,N566ER,1714.7,70880,41.3367,843.3,2558
R-67 W,N667ER,1708.4,70791,41.437,849.6,2558
R-68*,N668ER,1706.4,70775,41.4762,851.6,2558
R-69,N669ER,1706.4,70775,41.4762,851.6,2558
R-70,N670ER,1720.4,70649,41.0654,837.6,2558
R-71,N671ER,1707.7,70137,41.071,850.3,2558
R-72,N672ER,1707.7,70137,41.071,850.3,2558
R-73,N673ER,1714.8,71457,41.6707,843.2,2558
R-74,N674ER,1707.7,70137,41.071,850.3,2558
R-75,N675ER,1707.7,70137,41.071,850.3,2558
R-76,N676ER,1707.7,70137,41.071,850.3,2558
R-79,N679ER,1707.7,70137,41.071,850.3,2558
R-82,N4944S,1881.28,71681.5,38.1025,1218.72,3100
R-90,N790ER,3259.53,311187.33,95.47,1147.47,4407
R-91,N791ER,3251.818,310451.06,95.47,1155.182,4407
R-92*,N792ER,3248.5,310134.3,95.47,1158.5,4407
R-93,N793ER,3278.22,313632,95.6714,1128.78,4407
R-96,N596ER,3269.8179,312061.61,95.437,1137.1821,4407
R-97,N597ER,3269.82,312583.43,95.5965,1137.18,4407
R-98,N598ER,3249.98,309921.96,95.3612,1157.02,4407
R-99,N599ER,3274.23,312876.17,95.5572,1132.77,4407`
	const output: Aircraft[] = []
	const array: string[] = input.split(/\n/)
	for (let i = 0; i < array.length; i++) {
		const a = array[i]
		const aircraftArray = a.split(/,/)
		let aircraftName = aircraftArray[0]
		aircraftName = aircraftName.substring(0, 4)
		output.push({
			name: aircraftName,
			tailNumber: aircraftArray[1],
			weight: Number(aircraftArray[2]),
			arm: Number(aircraftArray[4]),
			moment: Number(aircraftArray[3])
		})
	}
	return output
}

// To actually execute the parsing code above
parse().then((a) => {
	console.log(a)
})
//tsc .\parse.ts;  mv .\parse.js .\parse.cjs; node .\parse.cjs; rm .\parse.cjs; rm .\aircraft.js
